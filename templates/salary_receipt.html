<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Salary Payment Receipt / إيصال دفع رواتب</title>
    <style>
        @page { size: A4; margin: 10mm; }
        :root { --sheet-width: 210mm; }
        html, body { height: auto; }
        body { font-family: 'Tahoma', sans-serif; margin: 0; display: grid; place-items: start center; background: #fff; color:#000; font-weight:700 }
        .sheet { width: var(--sheet-width); margin: 10mm auto; }
        .company { text-align: center; margin-bottom: 10px; }
        .company h3 { margin: 0 0 6px 0; }
        .company p { margin: 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; table-layout: fixed; }
        th, td { border: 1px solid #000; padding: 6px 8px; text-align: center; vertical-align: middle; word-break: break-word; }
        th { background: #fff; font-weight: 800; color:#000 }
        .num { direction: ltr; text-align: right; font-variant-numeric: tabular-nums; }
        .signatures { margin-top: 22px; }
        .sig-wrap { display: flex; gap: 16px; justify-content: space-between; }
        .sig-cell { flex: 1; }
        .sig-label { margin-bottom: 6px; font-weight: 700; text-align: center; }
        .sig-line { border-bottom: 1px dashed #000; height: 28px; }
        .footer { margin-top: 18px; text-align: center; font-size: 12px; color: #000; }
        .btn-print { display: inline-block; margin: 16px auto 0; padding: 8px 16px; background: #007bff; color: #fff; text-decoration: none; border-radius: 5px; }
        @media print { 
          .btn-print { display:none } .sheet { margin: 0 auto; }
          body, h1,h2,h3,h4,h5,h6,p,span,div,td,th,small,strong,em,b,i { color:#000 !important; font-weight:700 !important }
        }
    </style>
    <script>
        function doPrint(){ window.print(); }
    </script>
</head>
<body>

    <div class="sheet">
    <div class="company">
        <h3>{{ company_name }}</h3>
        <p>Salary Payment Receipt / إيصال سداد رواتب - {{ payment_date }}</p>
    </div>

    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Employee / الموظف</th>
                <th>Basic Salary / الراتب الأساسي</th>
                <th>Allowances / البدلات</th>
                <th>Deductions / الاستقطاعات</th>
                <th>Previous Dues / مستحقات سابقة</th>
                <th>Amount Paid / المبلغ المدفوع</th>
                <th>Net Salary / الصافي</th>
                <th>Payment Method / طريقة الدفع</th>
            </tr>
        </thead>
        <tbody>
            {% for pay in payments %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ pay.employee.full_name }}</td>
                <td class="num">{{ "%.2f"|format(pay.basic) }}</td>
                <td class="num">{{ "%.2f"|format(pay.allowances) }}</td>
                <td class="num">{{ "%.2f"|format(pay.deductions) }}</td>
                <td class="num">{{ "%.2f"|format(pay.prev_due) }}</td>
                <td class="num">{{ "%.2f"|format(pay.paid_amount) }}</td>
                <td class="num">{{ "%.2f"|format(pay.net_salary) }}</td>
                <td>{{ pay.method }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="signatures">
        <div class="sig-wrap">
            <div class="sig-cell">
                <div class="sig-label">Paid By / تم السداد بواسطة</div>
                <div class="sig-line">
                    {% set paid_by_name = paid_by %}
                    {% if paid_by_name %}{{ paid_by_name }}{% endif %}
                </div>
            </div>
            <div class="sig-cell">
                <div class="sig-label">Accountant Signature / توقيع المحاسب</div>
                <div class="sig-line"></div>
            </div>
            <div class="sig-cell">
                <div class="sig-label">Manager Signature / توقيع المدير</div>
                <div class="sig-line"></div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>Printed by system at / تم الدفع بواسطة النظام في {{ now }}</p>
        <a href="#" onclick="doPrint()" class="btn-print">🖨️ Print Receipt / طباعة الإيصال</a>
    </div>

    </div>
</body>
</html>



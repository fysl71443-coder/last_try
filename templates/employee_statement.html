{% extends 'base.html' %}
{% block title %}{{ _('Employee Statement / ÙƒØ´Ù Ø§Ù„Ù…ÙˆØ¸Ù') }}{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">ğŸ§¾ {{ _('Employee Statement / ÙƒØ´Ù Ø§Ù„Ù…ÙˆØ¸Ù') }}</h3>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="{{ url_for('main.dashboard') }}">ğŸ  {{ _('Dashboard') }}</a>
      <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ {{ _('Print') }}</button>
    </div>
  </div>
  <form method="GET" class="row g-2 align-items-end mb-3" id="stmtForm">
    <div class="col-auto">
      <label class="form-label">{{ _('Employee / Ø§Ù„Ù…ÙˆØ¸Ù') }}</label>
      <input class="form-control" value="{{ employee.full_name }}" disabled>
    </div>
    <div class="col-auto">
      <label class="form-label">{{ _('From / Ù…Ù†') }}</label>
      <input type="date" class="form-control" name="start_date" value="{{ start_date }}">
    </div>
    <div class="col-auto">
      <label class="form-label">{{ _('To / Ø¥Ù„Ù‰') }}</label>
      <input type="date" class="form-control" name="end_date" value="{{ end_date }}">
    </div>
  </form>
  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped align-middle">
          <thead>
            <tr>
              <th>#</th>
              <th>{{ _('Date / Ø§Ù„ØªØ§Ø±ÙŠØ®') }}</th>
              <th>{{ _('Type / Ø§Ù„Ù†ÙˆØ¹') }}</th>
              <th>{{ _('Description / Ø§Ù„ÙˆØµÙ') }}</th>
              <th class="text-end">{{ _('Amount / Ø§Ù„Ù…Ø¨Ù„Øº') }}</th>
              <th>{{ _('Notes / Ù…Ù„Ø§Ø­Ø¸Ø§Øª') }}</th>
            </tr>
          </thead>
          <tbody>
            {% for r in rows %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>{{ r.date }}</td>
              <td>{{ r.kind }}</td>
              <td>{{ r.desc }}</td>
              <td class="text-end">{{ '%.2f'|format(r.amount or 0) }}</td>
              <td>{{ r.notes or '' }}</td>
            </tr>
            {% else %}
            <tr><td colspan="6" class="text-center text-muted">{{ _('No records for selected period') }}</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<script>
(function(){
  var f = document.getElementById('stmtForm');
  if(!f) return;
  function auto(){ var sp=document.createElement('div'); sp.className='spinner-border text-primary'; sp.style.marginLeft='8px'; f.appendChild(sp); f.submit(); }
  ['start_date','end_date'].forEach(function(n){ var el=f.querySelector('[name="'+n+'"]'); if(el){ el.addEventListener('change', auto); } });
})();
</script>
<style>
  @media print{ .btn, nav, form { display:none !important; } .container{ padding:0 } }
</style>
{% endblock %}

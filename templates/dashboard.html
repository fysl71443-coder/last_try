{% extends 'base.html' %}
{% set hide_back_button = True %}
{% block title %}الرئيسية{% endblock %}
{% block content %}

<style>
/* Hub: cards-only, blue primary, no sidebar, no reports */
:root{
  --hub-primary: #1565C0;
  --hub-primary-dark: #0D47A1;
  --hub-primary-light: #42A5F5;
  --hub-bg: #f8fafc;
  --hub-card-bg: #ffffff;
  --hub-card-border: rgba(21, 101, 192, 0.12);
  --hub-card-height: calc(clamp(96px, 10vw, 120px));
  --hub-icon: calc(clamp(26px, 2.8vw, 32px));
}
.dashboard-hub{ background:var(--hub-bg); min-height:calc(100vh - 60px); padding:1.5rem 1rem 2rem; }
.dashboard-panel{ background:var(--hub-card-bg); border-radius:16px; box-shadow:0 4px 20px rgba(21,101,192,.08); border:1px solid var(--hub-card-border); padding:1.5rem 1.25rem; max-width:1200px; margin:0 auto; overflow:visible; }
.dashboard-panel .hub-title{ font-size:1rem; font-weight:700; color:var(--hub-primary); margin:0 0 1rem 0; padding-bottom:.5rem; border-bottom:1px solid var(--hub-card-border); }
.card-link{ text-decoration:none; display:block; color:inherit; }
.dashboard-card{
  position:relative; border-radius:14px; padding:12px; text-align:center; overflow:hidden;
  background:var(--hub-card-bg); border:1px solid var(--hub-card-border);
  box-shadow:0 2px 10px rgba(21,101,192,.06);
  display:flex; align-items:center; justify-content:center; flex-direction:column; height:var(--hub-card-height);
  transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}
.dashboard-card:hover{ transform:translateY(-2px); box-shadow:0 8px 24px rgba(21,101,192,.12); border-color:var(--hub-primary-light); }
.dashboard-card .title{ font-weight:700; font-size:.9rem; margin:6px 0 0 0; color:#1e293b; }
.dashboard-card .icon-3d{ width:var(--hub-icon); height:var(--hub-icon); margin:0 auto .2rem; display:block; }
#cards-grid{ display:grid; grid-template-columns:repeat(auto-fill, minmax(160px, 1fr)); gap:12px; overflow:visible; }
@media (max-width: 900px){ #cards-grid{ grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 480px){ #cards-grid{ grid-template-columns: 1fr; gap:10px; } }
.group-card{ display:block !important; width:100% !important; margin:0 !important; padding:0 !important; box-sizing:border-box; }
body.dark .dashboard-hub{ background:#0f172a; }
body.dark .dashboard-panel{ background:#1e293b; border-color:rgba(66,165,245,.2); }
body.dark .dashboard-card{ background:#1e293b; border-color:rgba(66,165,245,.15); }
body.dark .dashboard-card .title{ color:#e2e8f0; }
body.dark .dashboard-panel .hub-title{ color:var(--hub-primary-light); border-color:rgba(66,165,245,.2); }
</style>

<div class="dashboard-hub container py-4 ops-layout hub-wrap">
  <div class="ops-header-bar mb-3">
    <span class="ops-icon"><i class="fa-solid fa-house"></i></span>
    <div>
      <h1 class="ops-title mb-0">الرئيسية</h1>
      <span class="ops-subtitle">الوصول السريع للمبيعات، المشتريات، الفواتير، المخزون، التقارير والإعدادات</span>
    </div>
  </div>
  <div class="dashboard-panel">
    <div id="cards-grid" data-partial-links>

    <div class="group-card">
      <a href="{{ url_for('sales.sales') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gCoin" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#42A5F5"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><circle cx="32" cy="32" r="22" fill="url(#gCoin)"/><circle cx="32" cy="32" r="18" fill="#fff3"/><path d="M26 36c0 4 12 4 12 0s-12-4-12 0z" fill="#fff8"/></svg>
          <div class="title">المبيعات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('purchases.purchases') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gCart" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#64B5F6"/><stop offset="100%" stop-color="#1976D2"/></linearGradient></defs><rect x="16" y="22" width="32" height="18" rx="4" fill="url(#gCart)"/><circle cx="24" cy="44" r="4" fill="#333"/><circle cx="40" cy="44" r="4" fill="#333"/></svg>
          <div class="title">المشتريات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('suppliers.suppliers') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gHandshake" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90CAF9"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><path d="M22 32l10 6 10-6" fill="none" stroke="url(#gHandshake)" stroke-width="6" stroke-linecap="round"/></svg>
          <div class="title">الموردون</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('expenses.expenses') }}" class="card-link" data-full-reload>
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gExpense" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#64B5F6"/><stop offset="100%" stop-color="#0D47A1"/></linearGradient></defs><rect x="18" y="20" width="28" height="24" rx="6" fill="url(#gExpense)"/><circle cx="32" cy="32" r="6" fill="#fff8"/></svg>
          <div class="title">المصروفات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.invoices') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gDoc" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#BBDEFB"/><stop offset="100%" stop-color="#1976D2"/></linearGradient></defs><rect x="18" y="14" width="28" height="36" rx="6" fill="url(#gDoc)"/><rect x="24" y="22" width="16" height="4" rx="2" fill="#fff9"/><rect x="24" y="30" width="16" height="4" rx="2" fill="#fff6"/></svg>
          <div class="title">كل الفواتير</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('inventory.inventory') }}" class="card-link" data-full-reload>
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gBox" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#81D4FA"/><stop offset="100%" stop-color="#0288D1"/></linearGradient></defs><path d="M16 24l16-10 16 10v20l-16 10-16-10z" fill="url(#gBox)"/></svg>
          <div class="title">المخزون</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('payments.payments') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gCard" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#64B5F6"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><rect x="14" y="20" width="36" height="24" rx="6" fill="url(#gCard)"/><rect x="18" y="26" width="20" height="4" rx="2" fill="#fff9"/></svg>
          <div class="title">المدفوعات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('reports.reports') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gChart" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90CAF9"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><rect x="20" y="30" width="6" height="14" rx="2" fill="url(#gChart)"/><rect x="30" y="24" width="6" height="20" rx="2" fill="url(#gChart)"/><rect x="40" y="34" width="6" height="10" rx="2" fill="url(#gChart)"/></svg>
          <div class="title">التقارير</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.archive') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gFolder" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90A4AE"/><stop offset="100%" stop-color="#455A64"/></linearGradient></defs><path d="M14 24h16l4 6h16v20H14z" fill="url(#gFolder)"/></svg>
          <div class="title">الأرشيف</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="/fiscal-years/" class="card-link" data-full-reload>
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gFiscal" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90CAF9"/><stop offset="100%" stop-color="#0D47A1"/></linearGradient></defs><rect x="14" y="18" width="36" height="28" rx="6" fill="url(#gFiscal)"/><rect x="20" y="24" width="8" height="6" rx="2" fill="#fff8"/><rect x="32" y="24" width="8" height="6" rx="2" fill="#fff8"/><rect x="20" y="34" width="20" height="4" rx="2" fill="#fff6"/></svg>
          <div class="title">السنوات المالية</div>
        </div>
      </a>
    </div>

    <div class="group-card" style="grid-column: 1 / -1;">
      <div class="hub-title mt-3 mb-1">المحاسبة والتدقيق</div>
    </div>
    <div class="group-card">
      <a href="{{ url_for('vat.vat_dashboard') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gVat" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#64B5F6"/><stop offset="100%" stop-color="#0D47A1"/></linearGradient></defs><circle cx="32" cy="24" r="10" fill="url(#gVat)"/><rect x="20" y="36" width="24" height="10" rx="5" fill="#fff6"/></svg>
          <div class="title">ضريبة القيمة المضافة</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('financials.accounts_hub') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gAcc" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#81D4FA"/><stop offset="100%" stop-color="#0277BD"/></linearGradient></defs><rect x="18" y="18" width="28" height="28" rx="6" fill="url(#gAcc)"/><rect x="22" y="24" width="20" height="4" rx="2" fill="#fff9"/><rect x="22" y="32" width="20" height="4" rx="2" fill="#fff6"/></svg>
          <div class="title">الحسابات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('financials.statements_hub') }}" class="card-link" data-full-reload>
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gStmt" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#64B5F6"/><stop offset="100%" stop-color="#0D47A1"/></linearGradient></defs><path d="M20 16h24v6H20z" fill="url(#gStmt)"/><path d="M20 26h16v4H20z" fill="url(#gStmt)" opacity=".8"/><path d="M20 34h20v4H20z" fill="url(#gStmt)" opacity=".6"/><rect x="20" y="42" width="12" height="4" rx="2" fill="url(#gStmt)" opacity=".5"/></svg>
          <div class="title">القوائم المالية</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('customers.customers') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gCust" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90CAF9"/><stop offset="100%" stop-color="#1976D2"/></linearGradient></defs><circle cx="24" cy="26" r="7" fill="url(#gCust)"/><circle cx="40" cy="26" r="7" fill="url(#gCust)"/><rect x="18" y="36" width="28" height="10" rx="5" fill="#fff6"/></svg>
          <div class="title">العملاء</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.menu') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gMenu" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#BBDEFB"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><path d="M20 18h24v28H20z" fill="url(#gMenu)"/><rect x="24" y="24" width="16" height="3" rx="1.5" fill="#fff9"/><rect x="24" y="30" width="16" height="3" rx="1.5" fill="#fff6"/></svg>
          <div class="title">المنيو</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.settings') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gGear" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90A4AE"/><stop offset="100%" stop-color="#546E7A"/></linearGradient></defs><circle cx="32" cy="32" r="8" fill="#fff6"/><path d="M32 16l4 6 6 4-6 4-4 6-4-6-6-4 6-4z" fill="url(#gGear)"/></svg>
          <div class="title">الإعدادات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.table_settings') }}" class="card-link" data-full-reload>
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gChair" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#81D4FA"/><stop offset="100%" stop-color="#0288D1"/></linearGradient></defs><rect x="20" y="24" width="24" height="8" rx="2" fill="url(#gChair)"/><rect x="24" y="32" width="16" height="12" rx="2" fill="#fff6"/></svg>
          <div class="title">الطاولات</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.employees') }}" class="card-link" data-full-reload>
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gEmp" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90CAF9"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><circle cx="32" cy="22" r="8" fill="url(#gEmp)"/><path d="M20 48c0-8 5-14 12-14s12 6 12 14" fill="none" stroke="url(#gEmp)" stroke-width="4"/><rect x="28" y="36" width="8" height="12" rx="2" fill="url(#gEmp)" opacity=".7"/></svg>
          <div class="title">{{ _('Employees') }}</div>
        </div>
      </a>
    </div>

    <div class="group-card">
      <a href="{{ url_for('main.users') }}" class="card-link">
        <div class="dashboard-card">
          <svg class="icon-3d" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gUsers" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#90CAF9"/><stop offset="100%" stop-color="#1565C0"/></linearGradient></defs><circle cx="20" cy="24" r="6" fill="url(#gUsers)"/><circle cx="44" cy="24" r="6" fill="url(#gUsers)"/><path d="M12 42c0-6 6-10 16-10s16 4 16 10" fill="none" stroke="url(#gUsers)" stroke-width="4"/></svg>
          <div class="title">المستخدمون</div>
        </div>
      </a>
    </div>

    </div>
  </div>

  {% if (current_user.role|default('')) == 'user' %}
  <div class="mt-4 mx-auto" style="max-width:1200px;">
    <div class="alert alert-info mb-0">
      {{ _('Sales users only see sales. Use the top menu to access your branch sales tables.') }}
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}

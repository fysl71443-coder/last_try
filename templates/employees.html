{% extends 'base.html' %}{% set back_url = url_for('dashboard') %}
{% block title %}{{ _('Employees / Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ†') }}{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">ğŸ‘¤ {{ _('Employees / Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ†') }}</h3>
    <div class="d-flex flex-wrap gap-2">
      <a href="{{ url_for('salaries_monthly') }}" class="btn btn-success">ğŸ’µ {{ _('Monthly Salaries / Ø±ÙˆØ§ØªØ¨ Ø´Ù‡Ø±ÙŠØ©') }}</a>
      <a href="{{ url_for('salaries_statements') }}" class="btn btn-outline-success">ğŸ§¾ {{ _('Payroll Statements / ÙƒØ´ÙˆÙØ§Øª Ø§Ù„Ø±ÙˆØ§ØªØ¨') }}</a>
      <a href="{{ url_for('salaries') }}" class="btn btn-outline-secondary">ğŸ“ {{ _('Salaries Form / Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±ÙˆØ§ØªØ¨') }}</a>
      <a href="{{ url_for('dashboard') }}" class="btn btn-primary">ğŸ  {{ _('Dashboard / Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…') }}</a>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-body">
      <form method="POST">
        {{ form.hidden_tag() }}
        <div class="row g-3">
          <div class="col-md-3">{{ form.employee_code.label(class_='form-label') }}{{ form.employee_code(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.full_name.label(class_='form-label') }}{{ form.full_name(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.national_id.label(class_='form-label') }}{{ form.national_id(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.status.label(class_='form-label') }}{{ form.status(class_='form-select') }}</div>
          <div class="col-md-3">{{ form.department.label(class_='form-label') }}{{ form.department(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.position.label(class_='form-label') }}{{ form.position(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.phone.label(class_='form-label') }}{{ form.phone(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.email.label(class_='form-label') }}{{ form.email(class_='form-control') }}</div>
          <div class="col-md-3">{{ form.hire_date.label(class_='form-label') }}{{ form.hire_date(class_='form-control') }}</div>
        </div>
        <div class="text-end mt-3">
          {{ form.submit(class_='btn btn-success') }}
        </div>
      </form>
    </div>
  </div>

  {% if employees %}
  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>{{ _('Code / Ø§Ù„Ø±Ù…Ø²') }}</th>
              <th>{{ _('Name / Ø§Ù„Ø§Ø³Ù…') }}</th>
              <th>{{ _('National ID / Ø§Ù„Ù‡ÙˆÙŠØ©') }}</th>
              <th>{{ _('Department / Ø§Ù„Ù‚Ø³Ù…') }}</th>
              <th>{{ _('Position / Ø§Ù„ÙˆØ¸ÙŠÙØ©') }}</th>
              <th>{{ _('Phone / Ø§Ù„Ù‡Ø§ØªÙ') }}</th>
              <th>{{ _('Email / Ø§Ù„Ø¨Ø±ÙŠØ¯') }}</th>
              <th>{{ _('Hire Date / Ø§Ù„ØªØ¹ÙŠÙŠÙ†') }}</th>
              <th>{{ _('Status / Ø§Ù„Ø­Ø§Ù„Ø©') }}</th>
              <th>{{ _('Actions / Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª') }}</th>
            </tr>
          </thead>
          <tbody>
            {% for e in employees %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>{{ e.employee_code }}</td>
              <td>{{ e.full_name }}</td>
              <td>{{ e.national_id }}</td>
              <td>{{ e.department or '-' }}</td>
              <td>{{ e.position or '-' }}</td>
              <td>{{ e.phone or '-' }}</td>
              <td>{{ e.email or '-' }}</td>
              <td>{{ e.hire_date or '-' }}</td>
              <td>{{ _('Active / Ù†Ø´Ø·') if e.status=='active' else _('Inactive / ØºÙŠØ± Ù†Ø´Ø·') }}</td>
              <td>
                <a href="{{ url_for('edit_employee', emp_id=e.id) }}" class="btn btn-sm btn-outline-primary">{{ _('Edit / ØªØ¹Ø¯ÙŠÙ„') }}</a>
                <form method="POST" action="{{ url_for('delete_employee', emp_id=e.id) }}" style="display:inline" onsubmit="return confirmDelete('{{ e.full_name }}')">
                  {{ form.csrf_token }}
                  <button type="submit" class="btn btn-sm btn-outline-danger">{{ _('Delete / Ø­Ø°Ù') }}</button>
                </form>
              </td>
            </tr>
<script>
function confirmDelete(name){
  return confirm("{{ _('Are you sure to delete / Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ') }}\n" + name);
}
</script>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}

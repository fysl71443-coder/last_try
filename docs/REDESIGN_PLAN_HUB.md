# خطة إعادة التصميم – Hub-Based (أزرق)

## الهوية اللونية
- **الأساسي:** أزرق `#1565c0` / `#0d47a1`
- **خلفية:** رمادي فاتح `#f1f5f9`
- **البطاقات:** أبيض + ظل خفيف / حد ناعم
- **التحذيرات:** أخضر (نجاح)، أحمر (خطأ)، برتقالي (تنبيه)
- ❌ **لا يُستخدم الأخضر كلون أساسي** لأي شاشة.

## النمط العام
- **Header:** `ops-header-bar` (أزرق) — عنوان، subtitle، أزرار إجراءات مرتبطة بالسياق فقط.
- **Tabs:** زرقاء، active واضح. لا tabs غير مستخدمة.
- **Cards:** `ops-form-card` — وظيفة واحدة لكل card.
- **بدون ازدحام، بدون sidebar** إلا إذا كان يخدم تنقلًا داخليًا.

## قواعد
- ✅ **جميع الشاشات لها بطاقات** — استخدام `ops-form-card` أو `screen-section` لكل كتلة محتوى. التخطيط: `ops-layout hub-wrap` + `ops-header-bar` ثم البطاقات.
- ❌ لا ألوان مختلفة لكل شاشة.
- ❌ لا sidebar عام (إلا اختياري داخلي حيث مذكور).
- ❌ عدم تكديس أكثر من 2–3 cards في صف واحد.
- ❌ عدم خلط أكثر من وظيفة داخل card واحدة.
- ✅ **لا إضافة أزرار أو وظائف غير موجودة.** إعادة تصميم ما هو موجود فقط.

---

## الشاشات وقسمة الوظائف

### 0. لوحة التحكم (Dashboard) — بوابة فقط
- **بدون Sidebar.** الاعتماد على البطاقات فقط للتنقل.
- **بدون تقارير / KPI.** الشاشة = Hub فقط، لا استعلامات ثقيلة.
- **أعلى الصفحة:** اسم المطعم، زر تبديل اللغة، زر الخروج (في الـ navbar).
- **ألوان:** أزرق أساسي (Corporate / Finance-friendly). بطاقات بتدرجات أزرق.

### 1. المصروفات (Expenses)
- **Header:** عنوان، subtitle، أزرار (المشتريات، لوحة التحكم) — كما هي.
- **Tabs:** إضافة | سجل
- **Tab إضافة:**
  - Card 1: إثبات مصروف سريع (سيناريوهات + نموذج السيناريو)
  - Card 2: فاتورة مصروفات (نموذج الفاتورة الكامل)
- **Tab سجل:**
  - Card: قائمة فواتير المصروفات (الجدول)
- **بدون Sidebar.** إزالة التعليمات / المعلومات المحاسبية من الشريط الجانبي.

### 2. المشتريات (Purchases)
- **Header:** عنوان، subtitle، أزرار (المواد الخام، الرئيسية).
- **بدون Tabs** (لا توجد مرتجعات في النظام).
- **Cards:**
  - بيانات المورد
  - بيانات الفاتورة
  - بنود الشراء
  - الإجماليات
- الروابط إلى قائمة الموردين تبقى في الـ header إن وُجدت.

### 3. المخزون (Inventory)
- **Header:** عنوان، subtitle، أزرار (المشتريات، الرئيسية).
- **Tabs:** حركات (سجل المشتريات) | تقارير (KPI + ملخص) — حسب الموجود. لا إعدادات إلا إن وُجدت.
- **Cards:** حسب المحتوى — حركات، ملخص، إلخ. وظيفة واحدة لكل card.

### 4. الضريبة (VAT)
- **Header:** عنوان، subtitle.
- **Tabs:** المخرجات (مبيعات) | المدخلات (مشتريات ومصروفات) | الإقرار (إن وُجد) — أو تبويبات تتناسب مع المحتوى الحالي.
- **Cards:** الفترة والعرض، ثم محتوى كل tab.

### 5. القوائم المالية (Trial Balance, Income, Balance Sheet)
- **Header:** عنوان، subtitle، أزرار (رجوع، قائمة الدخل، المركز المالي، طباعة، تصدير) كما هي.
- **Tabs:** كتنقّل بين ميزان المراجعة / قائمة الدخل / المركز المالي (روابط).
- **Cards:** الفترة والعرض، ثم الجداول والتقرير.

### 6. قيود اليومية (Journal)
- **Header:** عنوان، subtitle، أزرار (قيد جديد، القائمة، إنشاء قيود الفترة، شجرة الحسابات، طباعة PDF، تصدير XLS).
- **Tabs:** قيد جديد | سجل القيود
- **Tab قيد جديد:** Card لإدخال القيد (إن وُجدت واجهة).
- **Tab سجل القيود:** Card للفلاتر + Card للعرض.

### 7. التقارير (Reports)
- **Header:** عنوان، subtitle.
- **بدون Tabs** (تقرير واحد: نوع، تاريخ، فرع).
- **Cards:** فلاتر التقرير | عرض النتائج.

### 8. المدفوعات (Payments)
- **Header:** عنوان، subtitle، أزرار (الرئيسية، تصدير).
- **Tabs:** دفع (موردون / فواتير) | تحصيل (مدينون) — حسب الموجود.
- **Cards:** فلاتر، موردون، مدينون، كل الفواتير — كل قسم في card واضح.

### 9. العملاء (Customers)
- **Header:** عنوان، subtitle، أزرار (عميل جديد، بحث، تصدير، الرئيسية).
- **Tabs:** قائمة | إضافة
- **Card قائمة:** جدول العملاء + إجراءات.
- **Card إضافة:** نموذج الإضافة + استيراد CSV/Excel إن وُجد.
- **Sidebar داخلي اختياري** فقط إن كان يخدم تنقّلًا داخل الصفحة.

### 10. الموردون (Suppliers)
- نفس نمط العملاء: Header، Tabs (قائمة | إضافة أو ما يناسب)، Cards. لا اختلاف لوني أو بنيوي.

### 11. الإعدادات (Settings)
- **Header:** عنوان، subtitle.
- **Tabs داخل Card واحدة** (عام، China Town، Palace India، طباعة).
- **بدون تشتت بصري.**

### 12. كل الفواتير (All Invoices)
- **Header:** عنوان، subtitle.
- **Tabs:** مبيعات | مشتريات | مصروفات | الكل
- **Card فلترة:** نوع التقرير، تواريخ، فرع، أزرار تطبيق.
- **Card عرض تفصيلي:** الجدول والتفاصيل.

---

## الملفات المتأثرة
- `static/css/screens.css`: Hub أزرق، `hub-tabs`، overrides للجداول داخل hub.
- `templates/expenses.html`
- `templates/purchases.html`
- `templates/inventory.html`
- `templates/vat/vat_dashboard.html`
- `templates/financials/trial_balance.html`, `income_statement.html`, `balance_sheet.html`
- `templates/journal_entries.html`
- `templates/reports.html`
- `templates/payments.html`
- `templates/customers.html`
- `templates/suppliers.html`
- `templates/settings.html`
- `templates/invoices.html`

## استثناء
- **شاشة المبيعات (POS وما يرتبط بها)** تبقى كما هي دون تعديل.

---

## تم تنفيذه
- **CSS:** `hub-wrap`, `hub-tabs`, جدول أزرق داخل hub، `ops-body-no-sidebar`، `a.ops-tab`.
- **المصروفات:** Header + Tabs (إضافة | سجل)، Card إثبات سريع + Card فاتورة + Card سجل، بدون Sidebar.
- **المشتريات، ميزان المراجعة، قائمة الدخل، المستخدمون، الإعدادات، المنيو:** `hub-wrap` + هيكل موجود.
- **العملاء:** Header + Tabs (قائمة | إضافة)، Card قائمة + Card إضافة، بدون Sidebar.
- **الموردون:** Header + Tabs (إضافة | قائمة كرابط)، Card إضافة، بدون Sidebar.
- **كل الفواتير:** Header + Tabs (مبيعات | مشتريات | مصروفات | الكل)، Card فلترة وعرض تفصيلي.
- **قيود اليومية:** Header + Tabs (قيد جديد | سجل القيود) كروابط، Card فلاتر + Card سجل، Card قيد جديد/تعديل.
- **التقارير:** تحويل لـ base + hub، Card فلاتر (تقرير رئيسي + مبيعات العملاء) + Card عرض النتائج.
- **المدفوعات:** Tabs (دفع | تحصيل)، Tab دفع: موردون + كل الفواتير، Tab تحصيل: مدينون من المبيعات.
- **المخزون:** Tabs (حركات | تقارير)، Tab حركات: سجل المشتريات، Tab تقارير: KPI + ملخص + تحليل.
- **VAT:** Tabs (المخرجات | المدخلات | الإقرار)، كل tab: Card للمحتوى المناسب.

# ุชูุฑูุฑ ุดุงูู ุนู ูุธุงู ุฅุฏุงุฑุฉ ุงููุทุงุนู
## CHINA TOWN - PLACE INDIA

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู](#ูุธุฑุฉ-ุนุงูุฉ-ุนูู-ุงููุธุงู)
2. [ุงูุจููุฉ ุงูุชูููุฉ ูุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ](#ุงูุจููุฉ-ุงูุชูููุฉ-ูุงูุชูููุงุช-ุงููุณุชุฎุฏูุฉ)
3. [ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูููุงุฐุฌ](#ูููู-ูุงุนุฏุฉ-ุงูุจูุงูุงุช-ูุงูููุงุฐุฌ)
4. [ุงููููุงุช ุงูุฑุฆูุณูุฉ ูุงููุธุงุฆู](#ุงููููุงุช-ุงูุฑุฆูุณูุฉ-ูุงููุธุงุฆู)
5. [ูุธุงู ููุงุท ุงูุจูุน (POS)](#ูุธุงู-ููุงุท-ุงูุจูุน-pos)
6. [ูุธุงู ุงููุญุงุณุจุฉ ุงููุงููุฉ](#ูุธุงู-ุงููุญุงุณุจุฉ-ุงููุงููุฉ)
7. [ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช](#ุฅุฏุงุฑุฉ-ุงููุณุชุฎุฏููู-ูุงูุตูุงุญูุงุช)
8. [ุชุฏูู ุงูุนูู ูู ุงููุธุงู](#ุชุฏูู-ุงูุนูู-ูู-ุงููุธุงู)
9. [ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)](#ูุงุฌูุงุช-ุจุฑูุฌุฉ-ุงูุชุทุจููุงุช-apis)
10. [ุงููููุงุช ุงูุซุงุจุชุฉ ูุงูููุงูุจ](#ุงููููุงุช-ุงูุซุงุจุชุฉ-ูุงูููุงูุจ)

---

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู

### ุงููุตู
ูุธุงู ุฅุฏุงุฑุฉ ูุชูุงูู ูููุทุงุนู ูุฏุนู ูุฑุนูู:
- **China Town** (ุงูุตูู ุชุงูู)
- **Place India** (ุจุงูุงุณ ุฅูุฏูุง)

### ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ
1. **ูุธุงู ููุงุท ุงูุจูุน (POS)** - ุฅุฏุงุฑุฉ ุงูุทุงููุงุช ูุงูุทูุจุงุช
2. **ุฅุฏุงุฑุฉ ุงููุจูุนุงุช** - ููุงุชูุฑ ุงููุจูุนุงุช ูุงููุญุงุณุจุฉ
3. **ุฅุฏุงุฑุฉ ุงููุดุชุฑูุงุช** - ููุงุชูุฑ ุงููุดุชุฑูุงุช ูุงูููุฑุฏูู
4. **ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช** - ุชุณุฌูู ุงููุตุฑููุงุช ุงูููููุฉ
5. **ุฅุฏุงุฑุฉ ุงููุฎุฒูู** - ุงูููุงุฏ ุงูุฎุงู ูุงููุฌุจุงุช
6. **ุฅุฏุงุฑุฉ ุงูููุธููู ูุงูุฑูุงุชุจ** - ูุธุงู ูุงูู ููููุงุฑุฏ ุงูุจุดุฑูุฉ
7. **ุงููุธุงู ุงููุญุงุณุจู** - ุฏูุชุฑ ุงูุฃุณุชุงุฐุ ุงููููุฏ ุงูููููุฉุ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
8. **ุฅุฏุงุฑุฉ ุงูุนููุงุก ูุงูููุฑุฏูู** - ูุงุนุฏุฉ ุจูุงูุงุช ุดุงููุฉ
9. **ุงูุชูุงุฑูุฑ** - ุชูุงุฑูุฑ ูุงููุฉ ููุจูุนุงุช ููุดุชุฑูุงุช

---

## ุงูุจููุฉ ุงูุชูููุฉ ูุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### ุงูุชูููุงุช ุงูุฃุณุงุณูุฉ

#### Backend Framework
- **Flask** - ุฅุทุงุฑ ุนูู Python ููููุจ
- **SQLAlchemy** - ORM ูุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Flask-Login** - ุฅุฏุงุฑุฉ ุฌูุณุงุช ุงููุณุชุฎุฏููู
- **Flask-Bcrypt** - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- **Flask-Migrate** - ุฅุฏุงุฑุฉ ุชุฑุญููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Flask-Babel** - ุฏุนู ุงููุบุงุช (ุนุฑุจู/ุฅูุฌููุฒู)
- **Flask-WTF** - ุญูุงูุฉ CSRF

#### ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **SQLite** - ููุชุทููุฑ ุงููุญูู
- **PostgreSQL** - ููุฅูุชุงุฌ (Render.com)

#### Frontend
- **HTML5/CSS3** - ูุงุฌูุฉ ุงููุณุชุฎุฏู
- **JavaScript** - ุงูุชูุงุนู ุงูุฏููุงูููู
- **Jinja2 Templates** - ููุงูุจ Flask

#### ุงูููุชุจุงุช ุงูุฅุถุงููุฉ
- **pytz** - ุฅุฏุงุฑุฉ ุงูููุงุทู ุงูุฒูููุฉ (Asia/Riyadh)
- **datetime** - ุงูุชุนุงูู ูุน ุงูุชูุงุฑูุฎ ูุงูุฃููุงุช

---

## ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูููุงุฐุฌ

### ุงูููุงุฐุฌ ุงูุฑุฆูุณูุฉ (Models)

#### 1. ุงููุณุชุฎุฏููู (User)
```python
- id: ูุนุฑู ุงููุณุชุฎุฏู
- username: ุงุณู ุงููุณุชุฎุฏู
- password_hash: ูููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ
- email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- role: ุงูุฏูุฑ (admin/user)
- twofa_enabled: ุชูุนูู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
- active: ุญุงูุฉ ุงููุดุงุท
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 14

#### 2. ููุงุชูุฑ ุงููุจูุนุงุช (SalesInvoice)
```python
- invoice_number: ุฑูู ุงููุงุชูุฑุฉ
- date: ุงูุชุงุฑูุฎ
- branch: ุงููุฑุน (china_town / place_india)
- table_number: ุฑูู ุงูุทุงููุฉ
- customer_id: ูุนุฑู ุงูุนููู
- total_before_tax: ุงูุฅุฌูุงูู ูุจู ุงูุถุฑูุจุฉ
- tax_amount: ูููุฉ ุงูุถุฑูุจุฉ
- discount_amount: ูููุฉ ุงูุฎุตู
- total_after_tax_discount: ุงูุฅุฌูุงูู ุงูููุงุฆู
- payment_method: ุทุฑููุฉ ุงูุฏูุน
- status: ุงูุญุงูุฉ (paid/unpaid/partial)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 65

**ุงูุนูุงูุงุช**:
- `items`: ุนูุงูุฉ ูุน `SalesInvoiceItem` (ุงูููุชุฌุงุช ูู ุงููุงุชูุฑุฉ)
- `user_id`: ุนูุงูุฉ ูุน `User` (ููุดุฆ ุงููุงุชูุฑุฉ)

#### 3. ุนูุงุตุฑ ููุงุชูุฑ ุงููุจูุนุงุช (SalesInvoiceItem)
```python
- invoice_id: ูุนุฑู ุงููุงุชูุฑุฉ
- product_name: ุงุณู ุงูููุชุฌ
- quantity: ุงููููุฉ
- price_before_tax: ุงูุณุนุฑ ูุจู ุงูุถุฑูุจุฉ
- tax: ุงูุถุฑูุจุฉ
- discount: ุงูุฎุตู
- total_price: ุงูุณุนุฑ ุงูุฅุฌูุงูู
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 120

#### 4. ููุงุชูุฑ ุงููุดุชุฑูุงุช (PurchaseInvoice)
```python
- invoice_number: ุฑูู ุงููุงุชูุฑุฉ
- supplier_id: ูุนุฑู ุงูููุฑุฏ
- supplier_name: ุงุณู ุงูููุฑุฏ
- total_before_tax: ุงูุฅุฌูุงูู ูุจู ุงูุถุฑูุจุฉ
- tax_amount: ุงูุถุฑูุจุฉ
- payment_method: ุทุฑููุฉ ุงูุฏูุน
- status: ุงูุญุงูุฉ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 258

#### 5. ููุงุชูุฑ ุงููุตุฑููุงุช (ExpenseInvoice)
```python
- invoice_number: ุฑูู ุงููุงุชูุฑุฉ
- date: ุงูุชุงุฑูุฎ
- payment_method: ุทุฑููุฉ ุงูุฏูุน
- total_before_tax: ุงูุฅุฌูุงูู ูุจู ุงูุถุฑูุจุฉ
- tax_amount: ุงูุถุฑูุจุฉ
- status: ุงูุญุงูุฉ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 315

#### 6. ุงูุทุงููุงุช (Table)
```python
- branch_code: ุฑูุฒ ุงููุฑุน
- table_number: ุฑูู ุงูุทุงููุฉ
- status: ุงูุญุงูุฉ (available/occupied/reserved)
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- updated_at: ุชุงุฑูุฎ ุงูุชุญุฏูุซ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 538

#### 7. ุฃูุณุงู ุงูุทุงููุงุช (TableSection)
```python
- branch_code: ุฑูุฒ ุงููุฑุน
- name: ุงุณู ุงููุณู
- sort_order: ุชุฑุชูุจ ุงูุนุฑุถ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 567

#### 8. ุงูุทูุจุงุช ุงููุคูุชุฉ (DraftOrder)
```python
- branch_code: ุฑูุฒ ุงููุฑุน
- table_number: ุฑูู ุงูุทุงููุฉ
- customer_id: ูุนุฑู ุงูุนููู
- items: ุงูุนูุงุตุฑ (JSON)
- status: ุงูุญุงูุฉ (draft/completed/cancelled)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 600

#### 9. ุงูุนููุงุก (Customer)
```python
- name: ุงูุงุณู
- phone: ุงููุงุชู
- discount: ูุณุจุฉ ุงูุฎุตู
- active: ุญุงูุฉ ุงููุดุงุท
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 718

#### 10. ุงูููุฑุฏูู (Supplier)
```python
- name: ุงูุงุณู
- contact_person: ุงูุดุฎุต ุงููุณุคูู
- phone: ุงููุงุชู
- email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- tax_number: ุงูุฑูู ุงูุถุฑูุจู
- address: ุงูุนููุงู
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 700

#### 11. ุงูููุงุฏ ุงูุฎุงู (RawMaterial)
```python
- name: ุงูุงุณู
- name_ar: ุงูุงุณู ุจุงูุนุฑุจู
- unit: ุงููุญุฏุฉ (kg, gram, liter)
- cost_per_unit: ุงูุชูููุฉ ููู ูุญุฏุฉ
- stock_quantity: ุงููููุฉ ูู ุงููุฎุฒูู
- category: ุงููุฆุฉ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 173

#### 12. ุงููุฌุจุงุช (Meal)
```python
- name: ุงูุงุณู
- name_ar: ุงูุงุณู ุจุงูุนุฑุจู
- category: ุงููุฆุฉ
- total_cost: ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
- profit_margin_percent: ูุณุจุฉ ุงูุฑุจุญ
- selling_price: ุณุนุฑ ุงูุจูุน
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 194

**ุงูุนูุงูุงุช**:
- `ingredients`: ุนูุงูุฉ ูุน `MealIngredient` (ุงูููููุงุช)

#### 13. ุงููููู (MenuCategory & MenuItem)
```python
MenuCategory:
- name: ุงุณู ุงููุฆุฉ
- branch_code: ุฑูุฒ ุงููุฑุน
- sort_order: ุชุฑุชูุจ ุงูุนุฑุถ

MenuItem:
- category_id: ูุนุฑู ุงููุฆุฉ
- name: ุงูุงุณู
- price: ุงูุณุนุฑ
- active: ุญุงูุฉ ุงููุดุงุท
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 730, 742

#### 14. ุงูููุธููู (Employee)
```python
- employee_code: ุฑูุฒ ุงูููุธู
- full_name: ุงูุงุณู ุงููุงูู
- national_id: ุงููููุฉ ุงููุทููุฉ
- department: ุงููุณู
- position: ุงูููุตุจ
- phone: ุงููุงุชู
- hire_date: ุชุงุฑูุฎ ุงูุชูุธูู
- status: ุงูุญุงูุฉ (active/inactive)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 401

#### 15. ุงูุฑูุงุชุจ (Salary)
```python
- employee_id: ูุนุฑู ุงูููุธู
- year: ุงูุณูุฉ
- month: ุงูุดูุฑ
- basic_salary: ุงูุฑุงุชุจ ุงูุฃุณุงุณู
- allowances: ุงูุจุฏูุงุช
- deductions: ุงูุฎุตููุงุช
- total_salary: ุงูุฑุงุชุจ ุงูุฅุฌูุงูู
- status: ุงูุญุงูุฉ (paid/due/partial)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 487

#### 16. ุงููุธุงู ุงููุญุงุณุจู

##### ุงูุญุณุงุจุงุช (Account)
```python
- code: ุฑูุฒ ุงูุญุณุงุจ
- name: ุงุณู ุงูุญุณุงุจ
- name_ar: ุงูุงุณู ุจุงูุนุฑุจู
- type: ุงูููุน (ASSET/LIABILITY/REVENUE/EXPENSE)
- level: ุงููุณุชูู ูู ุงูุดุฌุฑุฉ
- parent_account_code: ุงูุญุณุงุจ ุงูุฃุจ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 833

##### ุงููููุฏ ุงูููููุฉ (JournalEntry)
```python
- entry_number: ุฑูู ุงูููุฏ
- date: ุงูุชุงุฑูุฎ
- branch_code: ุฑูุฒ ุงููุฑุน
- description: ุงููุตู
- status: ุงูุญุงูุฉ (draft/posted)
- total_debit: ูุฌููุน ุงููุฏูู
- total_credit: ูุฌููุน ุงูุฏุงุฆู
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 858

**ุงูุนูุงูุงุช**:
- `lines`: ุนูุงูุฉ ูุน `JournalLine` (ุจููุฏ ุงูููุฏ)

##### ุจููุฏ ุงููููุฏ (JournalLine)
```python
- journal_id: ูุนุฑู ุงูููุฏ
- account_id: ูุนุฑู ุงูุญุณุงุจ
- debit: ุงููุฏูู
- credit: ุงูุฏุงุฆู
- description: ุงููุตู
- line_date: ุชุงุฑูุฎ ุงูุจูุฏ
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 883

##### ุฏูุชุฑ ุงูุฃุณุชุงุฐ (LedgerEntry)
```python
- date: ุงูุชุงุฑูุฎ
- account_id: ูุนุฑู ุงูุญุณุงุจ
- debit: ุงููุฏูู
- credit: ุงูุฏุงุฆู
- description: ุงููุตู
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 843

#### 17. ุงููุฏููุนุงุช (Payment)
```python
- invoice_id: ูุนุฑู ุงููุงุชูุฑุฉ
- invoice_type: ููุน ุงููุงุชูุฑุฉ (sales/purchase/expense)
- amount_paid: ุงููุจูุบ ุงููุฏููุน
- payment_date: ุชุงุฑูุฎ ุงูุฏูุน
- payment_method: ุทุฑููุฉ ุงูุฏูุน
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 525

#### 18. ุงูุฅุนุฏุงุฏุงุช (Settings)
```python
- key: ุงูููุชุงุญ
- value: ุงููููุฉ (JSON)
- branch_code: ุฑูุฒ ุงููุฑุน (ุงุฎุชูุงุฑู)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 637

#### 19. ุงูุชุฎุฒูู ุงูุจุณูุท (AppKV)
```python
- k: ุงูููุชุงุญ
- v: ุงููููุฉ (JSON string)
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- updated_at: ุชุงุฑูุฎ ุงูุชุญุฏูุซ
```

**ุงูููู**: `app/models.py` - ุงูุณุทุฑ 18

---

## ุงููููุงุช ุงูุฑุฆูุณูุฉ ูุงููุธุงุฆู

### 1. ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ

#### `app.py`
- **ุงููุตู**: ุงูููู ุงูุฑุฆูุณู ุงููุฏูู ุงูุฐู ูุญุชูู ุนูู ูู ุดูุก
- **ุงูุญุฌู**: ูุจูุฑ ุฌุฏุงู (ุฃูุซุฑ ูู 9000 ุณุทุฑ)
- **ุงููุธุงุฆู**:
  - ุฅูุดุงุก ุชุทุจูู Flask
  - ุชุณุฌูู ุฌููุน ุงููุณุงุฑุงุช
  - ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ุฏุนู SocketIO ููุชูุงุนู ุงูููุฑู

**ุงููุณุงุฑุงุช ุงูุฑุฆูุณูุฉ**:
- `/` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `/login` - ุชุณุฌูู ุงูุฏุฎูู
- `/dashboard` - ููุญุฉ ุงูุชุญูู
- `/sales` - ุงููุจูุนุงุช
- `/purchases` - ุงููุดุชุฑูุงุช
- `/expenses` - ุงููุตุฑููุงุช
- `/pos/<branch>/table/<number>` - ููุทุฉ ุงูุจูุน

#### `app/__init__.py`
- **ุงููุตู**: ููุทุฉ ุงูุฏุฎูู ุงูุญุฏูุซุฉ ุจุงุณุชุฎุฏุงู Application Factory Pattern
- **ุงููุธุงุฆู**:
  - `create_app()` - ุฏุงูุฉ ุฅูุดุงุก ุงูุชุทุจูู
  - ุชููุฆุฉ ุฌููุน ุงูุฅุถุงูุงุช (Extensions)
  - ุชุณุฌูู Blueprints
  - ุฅุนุฏุงุฏ ุงูููุงูุจ ูุงูุซูุงุจุช
  - ุฅุนุฏุงุฏ ุงูุตูุงุญูุงุช

**ุงูููุฏ ุงูุฑุฆูุณู**:
```python
def create_app(config_class=None):
    app = Flask(__name__)
    # ุชููุฆุฉ ุงูุฅุถุงูุงุช
    db.init_app(app)
    bcrypt.init_app(app)
    login_manager.init_app(app)
    # ุชุณุฌูู Blueprints
    app.register_blueprint(main)
    app.register_blueprint(vat)
    return app
```

#### `app_production.py`
- **ุงููุตู**: ููุทุฉ ุงูุฏุฎูู ููุฅูุชุงุฌ
- **ุงููุธุงุฆู**:
  - ููุน ุงุณุชุฎุฏุงู eventlet ูู ุงูุฅูุชุงุฌ
  - ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฅูุชุงุฌ
  - ุชุดุบูู ุงูุฎุงุฏู ุนูู ุงููููุฐ 8000

### 2. ุงูุฅุนุฏุงุฏุงุช ูุงูุชูููู

#### `config.py`
- **ุงููุตู**: ููู ุงูุฅุนุฏุงุฏุงุช
- **ุงููุชุบูุฑุงุช**:
  - `SQLALCHEMY_DATABASE_URI` - ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - `SECRET_KEY` - ุงูููุชุงุญ ุงูุณุฑู
  - `SESSION_COOKIE_SECURE` - ุฃูุงู ุงูููููุฒ
  - `ADMIN_DELETE_PASSWORD` - ูููุฉ ูุฑูุฑ ุญุฐู ุงููุณุคูู

**ุฏุนู ููุงุนุฏ ุงูุจูุงูุงุช**:
- SQLite ููุชุทููุฑ ุงููุญูู
- PostgreSQL ููุฅูุชุงุฌ (Render.com)

#### `extensions.py`
- **ุงููุตู**: ุชููุฆุฉ ุฌููุน ุฅุถุงูุงุช Flask
- **ุงูุฅุถุงูุงุช**:
  - `db` - SQLAlchemy
  - `bcrypt` - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
  - `migrate` - ุชุฑุญููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - `login_manager` - ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช
  - `babel` - ุงูุชุฑุฌูุฉ
  - `csrf` - ุญูุงูุฉ CSRF

### 3. ุงููุณุงุฑุงุช (Routes)

#### `app/routes.py`
- **ุงููุตู**: ุงูููู ุงูุฑุฆูุณู ูููุณุงุฑุงุช (ุฃูุซุฑ ูู 15000 ุณุทุฑ)
- **ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ**:

##### ูุณุงุฑุงุช ุงููุจูุนุงุช:
- `/sales` - ูุงุฆูุฉ ุงููุจูุนุงุช
- `/sales/<branch>/tables` - ุฅุฏุงุฑุฉ ุงูุทุงููุงุช
- `/pos/<branch>/table/<number>` - ููุทุฉ ุงูุจูุน ููุทุงููุฉ

##### ูุณุงุฑุงุช ุงููุดุชุฑูุงุช:
- `/purchases` - ูุงุฆูุฉ ุงููุดุชุฑูุงุช
- `/purchases/create` - ุฅูุดุงุก ูุงุชูุฑุฉ ูุดุชุฑูุงุช

##### ูุณุงุฑุงุช ุงููุตุฑููุงุช:
- `/expenses` - ูุงุฆูุฉ ุงููุตุฑููุงุช
- `/expenses/create` - ุฅูุดุงุก ูุงุชูุฑุฉ ูุตุฑููุงุช

##### ูุณุงุฑุงุช ุงูููุธููู:
- `/employees` - ูุงุฆูุฉ ุงูููุธููู
- `/salaries/pay` - ุฏูุน ุงูุฑูุงุชุจ
- `/salaries/statements` - ูุดูู ุงูุฑูุงุชุจ

##### ูุณุงุฑุงุช ุงูุชูุงุฑูุฑ:
- `/reports` - ุงูุชูุงุฑูุฑ
- `/reports/monthly` - ุงูุชูุงุฑูุฑ ุงูุดูุฑูุฉ

##### APIs:
- `/api/draft-order/<branch>/<table>` - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุงููุคูุชุฉ
- `/api/sales/checkout` - ุฅุชูุงู ุนูููุฉ ุงูุจูุน
- `/api/menu/<cat_id>/items` - ุงูุญุตูู ุนูู ุนูุงุตุฑ ุงููููู
- `/api/payments/register` - ุชุณุฌูู ุงููุฏููุนุงุช

#### `routes/financials.py`
- **ุงููุตู**: ูุณุงุฑุงุช ุงููุธุงู ุงููุงูู
- **ุงููุณุงุฑุงุช**:
  - `/financials/accounts` - ุงูุญุณุงุจุงุช
  - `/financials/journal` - ุงููููุฏ ุงูููููุฉ
  - `/financials/ledger` - ุฏูุชุฑ ุงูุฃุณุชุงุฐ
  - `/financials/trial-balance` - ููุฒุงู ุงููุฑุงุฌุนุฉ
  - `/financials/balance-sheet` - ุงูููุฒุงููุฉ ุงูุนููููุฉ
  - `/financials/income-statement` - ูุงุฆูุฉ ุงูุฏุฎู

#### `routes/journal.py`
- **ุงููุตู**: ุฅุฏุงุฑุฉ ุงููููุฏ ุงูููููุฉ
- **ุงููุณุงุฑุงุช**:
  - `/journal` - ูุงุฆูุฉ ุงููููุฏ
  - `/journal/create` - ุฅูุดุงุก ููุฏ
  - `/journal/<id>/edit` - ุชุนุฏูู ููุฏ
  - `/journal/<id>/post` - ุชุฑุญูู ุงูููุฏ

#### `routes/vat.py`
- **ุงููุตู**: ุฅุฏุงุฑุฉ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ
- **ุงููุณุงุฑุงุช**:
  - `/vat` - ููุญุฉ ุชุญูู VAT
  - `/vat/reports` - ุชูุงุฑูุฑ VAT

### 4. ุงูููุงุฐุฌ (Models)

#### `models.py`
- **ุงููุตู**: ุฌููุน ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงูุญุฌู**: ุฃูุซุฑ ูู 900 ุณุทุฑ
- **ูุญุชูู ุนูู**: ุฌููุน ุงูู Classes ุงููุฐููุฑุฉ ุฃุนูุงู

#### `app/models.py`
- **ุงููุตู**: ููุงุฐุฌ ุฅุถุงููุฉ ุฎุงุตุฉ ุจุงูุชุทุจูู
- **ุงูููุงุฐุฌ**:
  - `User` - ูุณุฎุฉ ูุจุณุทุฉ ูู ุงููุณุชุฎุฏู
  - `AppKV` - ุชุฎุฒูู key-value
  - `TableLayout` - ุชุฎุทูุท ุงูุทุงููุงุช

---

## ูุธุงู ููุงุท ุงูุจูุน (POS)

### ุงูุจููุฉ

#### 1. ุฅุฏุงุฑุฉ ุงูุทุงููุงุช

**ุงููุณุงุฑ**: `/sales/<branch_code>/tables`

**ุงููุธููุฉ**: `sales_tables(branch_code)`

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 6774

**ููู ูุนูู**:
1. ุฌูุจ ุฃูุณุงู ุงูุทุงููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (`TableSection`)
2. ุฌูุจ ุชุนูููุงุช ุงูุทุงููุงุช (`TableSectionAssignment`)
3. ูุญุต ุญุงูุฉ ุงูุทุงููุงุช ูู ุงูุทูุจุงุช ุงููุคูุชุฉ (`DraftOrder`)
4. ุนุฑุถ ุงูุทุงููุงุช ูุฌูุนุฉ ุญุณุจ ุงูุฃูุณุงู
5. ุนุฑุถ ุญุงูุฉ ูู ุทุงููุฉ (ูุชุงุญุฉ/ูุดุบููุฉ)

**ุงููุงูุจ**: `templates/sales_tables.html`

#### 2. ููุทุฉ ุงูุจูุน ููุทุงููุฉ

**ุงููุณุงุฑ**: `/pos/<branch_code>/table/<table_number>`

**ุงููุธููุฉ**: `pos_table(branch_code, table_number)`

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 6909

**ููู ูุนูู**:
1. ุชุญููู ุงูุทูุจ ุงููุคูุช ููุทุงููุฉ (ุฅู ูุฌุฏ)
2. ุฌูุจ ูุฆุงุช ุงููููู (`MenuCategory`)
3. ุฌูุจ ุนูุงุตุฑ ุงููููู (`MenuItem`)
4. ุชุญููู ุจูุงูุงุช ุงูุนููู (ุฅู ูุฌุฏ)
5. ุนุฑุถ ูุงุฌูุฉ POS ูุน:
   - ูุงุฆูุฉ ุงููุฆุงุช
   - ูุงุฆูุฉ ุงูุนูุงุตุฑ
   - ุณูุฉ ุงููุดุชุฑูุงุช
   - ูุนูููุงุช ุงูุนููู
   - ุงูุฎุตู ูุงูุถุฑูุจุฉ

**ุงููุงูุจ**: `templates/pos_invoice.html`

**JavaScript**: `static/js/pos_table.js`

#### 3. ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุงููุคูุชุฉ

**API**: `/api/draft-order/<branch_code>/<table_number>`

**ุงููุธููุฉ**: `api_draft_create_or_update()`

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 7375

**ููู ูุนูู**:
1. **GET**: ุฌูุจ ุงูุทูุจ ุงููุคูุช ูู `AppKV` ุฃู `DraftOrder`
2. **POST**: ุญูุธ/ุชุญุฏูุซ ุงูุทูุจ ุงููุคูุช
   - ุญูุธ ุงูุนูุงุตุฑ
   - ุญูุธ ุจูุงูุงุช ุงูุนููู
   - ุญูุธ ุงูุฎุตู ูุงูุถุฑูุจุฉ
   - ุญูุธ ุทุฑููุฉ ุงูุฏูุน

**ุงูุชุฎุฒูู**:
- ูู `AppKV` ูููุชุงุญ: `draft:{branch_code}:{table_number}`
- ุฃู ูู ุฌุฏูู `DraftOrder` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 4. ุฅุชูุงู ุนูููุฉ ุงูุจูุน

**API**: `/api/sales/checkout`

**ุงููุธููุฉ**: `api_sales_checkout()`

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 7728

**ููู ูุนูู**:
1. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
2. ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช (`SalesInvoice`)
3. ุฅูุดุงุก ุนูุงุตุฑ ุงููุงุชูุฑุฉ (`SalesInvoiceItem`)
4. ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ ุฅูู `occupied`
5. ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆูุฉ
6. ุฅุฑุฌุงุน ุฑูู ุงููุงุชูุฑุฉ

**ุงููููุฏ ุงููุญุงุณุจูุฉ**:
- ูุฏูู: ุงูููุฏูุฉ/ุงูุจูู (ุญุณุจ ุทุฑููุฉ ุงูุฏูุน)
- ุฏุงุฆู: ุงูุฅูุฑุงุฏุงุช (ุญุณุจ ุงููุฑุน ูุงูููุงุฉ)
- ุฏุงุฆู: ุถุฑูุจุฉ ุงููุฎุฑุฌุงุช (VAT Output)

**ุงูููุฏ**:
```python
# ุญุณุงุจ ุงูููุฏูุฉ
cash_code = '1013' if payment_method in ('BANK','TRANSFER','CARD') else '1011'

# ุญุณุงุจ ุงูุฅูุฑุงุฏุงุช
rev_code = '4012' if branch=='place_india' else '4011'
if channel == 'keeta': rev_code = '4013'
if channel == 'hunger': rev_code = '4014'
```

#### 5. ุทุจุงุนุฉ ุงููุงุชูุฑุฉ

**API**: `/api/invoice/confirm-print`

**ุงููุธููุฉ**: `api_invoice_confirm_print()`

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 7839

**ููู ูุนูู**:
1. ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ ุฅูู `paid`
2. ุชุณุฌูู ุงููุฏููุนุงุช (`Payment`)
3. ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ ููุชุญุตูู
4. ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ

**ุงูููุงูุจ**:
- `templates/print/receipt.html` - ุฅูุตุงู ุงูุฏูุน
- `templates/pos_invoice.html` - ูุงุชูุฑุฉ POS

### ุชุฏูู ุงูุนูู ุงููุงูู

```
1. ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงูุทุงููุงุช
   โ
2. ูุฎุชุงุฑ ุทุงููุฉ โ ููุชุญ ุตูุญุฉ POS
   โ
3. ูุถูู ุนูุงุตุฑ ูู ุงููููู โ ูุญูุธ ูู DraftOrder
   โ
4. ูุฎุชุงุฑ ุนููู (ุงุฎุชูุงุฑู) โ ูุทุจู ุงูุฎุตู ุชููุงุฆูุงู
   โ
5. ูุถุบุท "Checkout" โ ููุดุฆ SalesInvoice
   โ
6. ูุฎุชุงุฑ ุทุฑููุฉ ุงูุฏูุน โ ูุทุจุน ุงููุงุชูุฑุฉ
   โ
7. ุงููุธุงู ููุดุฆ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆูุงู
   โ
8. ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ ูุงููุฎุฒูู
```

---

## ูุธุงู ุงููุญุงุณุจุฉ ุงููุงููุฉ

### ุงูุจููุฉ

#### 1. ุฏููู ุงูุญุณุงุจุงุช (Chart of Accounts)

**ุงููููุฐุฌ**: `Account`

**ุงูููู**: `models.py` - ุงูุณุทุฑ 833

**ุงููููู**:
```
1xxx - ุงูุฃุตูู (Assets)
  1011 - ุงูููุฏูุฉ (Cash)
  1012 - ุงูุจูู (Bank)
  1013 - ุงูุญุณุงุจ ุงูุจููู (Bank Account)
  1020 - ุงููุฏูููู (Accounts Receivable)
  1210 - ุงููุฎุฒูู (Inventory)

2xxx - ุงูุฎุตูู (Liabilities)
  2024 - ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (VAT Output)
  2110 - ุงูุฏุงุฆููู (Accounts Payable)
  2130 - ุงูุฑูุงุชุจ ุงููุณุชุญูุฉ (Salaries Payable)

4xxx - ุงูุฅูุฑุงุฏุงุช (Revenue)
  4011 - ูุจูุนุงุช China Town
  4012 - ูุจูุนุงุช Place India
  4013 - ูุจูุนุงุช Keeta
  4014 - ูุจูุนุงุช Hunger Station

5xxx - ุงููุตุฑููุงุช (Expenses)
  5010 - ุงูุฑูุงุชุจ (Salaries)
  5060 - ุงููุตุฑููุงุช ุงูููุชุจูุฉ
  5070 - ุงูุชูุธูู
  5090 - ุงูุนูููุงุช ุงูุจูููุฉ
  5100 - ุงููุตุฑููุงุช ุงูุนุงูุฉ

6xxx - ุงูุถุฑุงุฆุจ ูุงููุตุฑููุงุช ุงูุฃุฎุฑู
  6200 - ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ ุงููุฏุฎูุฉ (VAT Input)
```

#### 2. ุงููููุฏ ุงูููููุฉ (Journal Entries)

**ุงููููุฐุฌ**: `JournalEntry` + `JournalLine`

**ุงูููู**: `models.py` - ุงูุณุทุฑ 858, 883

**ููู ูุนูู**:
1. ุฅูุดุงุก ููุฏ ูููู (`JournalEntry`)
2. ุฅุถุงูุฉ ุจููุฏ ุงูููุฏ (`JournalLine`)
3. ุงูุชุญูู ูู ุชูุงุฒู ุงููุฏูู ูุงูุฏุงุฆู
4. ุชุฑุญูู ุงูููุฏ (`post`) โ ููุดุฆ `LedgerEntry`

**ุงููุณุงุฑ**: `/journal`

**ุงูููู**: `routes/journal.py`

**ุงููุธุงุฆู**:
- `create_entry()` - ุฅูุดุงุก ููุฏ ุฌุฏูุฏ
- `edit_entry()` - ุชุนุฏูู ููุฏ
- `post_entry()` - ุชุฑุญูู ุงูููุฏ
- `delete_entry()` - ุญุฐู ููุฏ

#### 3. ุฏูุชุฑ ุงูุฃุณุชุงุฐ (Ledger)

**ุงููููุฐุฌ**: `LedgerEntry`

**ุงูููู**: `models.py` - ุงูุณุทุฑ 843

**ููู ูุนูู**:
- ูุชู ุฅูุดุงุก `LedgerEntry` ุชููุงุฆูุงู ุนูุฏ ุชุฑุญูู ุงููููุฏ
- ูู ููุฏ ูููู ููุชุฌ ุนุฏุฉ ูููุฏ ูู ุฏูุชุฑ ุงูุฃุณุชุงุฐ
- ูููู ุนุฑุถ ุฏูุชุฑ ุงูุฃุณุชุงุฐ ููู ุญุณุงุจ

**ุงููุณุงุฑ**: `/financials/ledger`

**ุงูููู**: `routes/financials.py`

#### 4. ุงููููุฏ ุงูุชููุงุฆูุฉ

##### ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช:
```python
# ูุฏูู: ุงูููุฏูุฉ/ุงูุจูู
debit: cash_account (1011 ุฃู 1013)

# ุฏุงุฆู: ุงูุฅูุฑุงุฏุงุช
credit: revenue_account (4011, 4012, 4013, 4014)

# ุฏุงุฆู: ุถุฑูุจุฉ ุงููุฎุฑุฌุงุช
credit: vat_output (2024)
```

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 7728

##### ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ูุดุชุฑูุงุช:
```python
# ูุฏูู: ุงููุฎุฒูู
debit: inventory (1210)

# ูุฏูู: ุถุฑูุจุฉ ุงููุฏุฎูุงุช
debit: vat_input (6200)

# ุฏุงุฆู: ุงูุฏุงุฆููู
credit: accounts_payable (2110)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 282 (ุฏุงูุฉ `to_journal_entries()`)

##### ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ูุตุฑููุงุช:
```python
# ูุฏูู: ุงููุตุฑููุงุช (ุญุณุจ ุงูููุน)
debit: expense_account (5010, 5060, 5070, etc.)

# ูุฏูู: ุถุฑูุจุฉ ุงููุฏุฎูุงุช
debit: vat_input (6200)

# ุฏุงุฆู: ุงูุฏุงุฆููู
credit: accounts_payable (2110)

# ุฅุฐุง ูุงู ุงูุฏูุน ููุฑู:
# ูุฏูู: ุงูุฏุงุฆููู
debit: accounts_payable (2110)

# ุฏุงุฆู: ุงูููุฏูุฉ/ุงูุจูู
credit: cash_account (1011 ุฃู 1013)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 334 (ุฏุงูุฉ `to_journal_entries()`)

##### ุนูุฏ ุฏูุน ุฑุงุชุจ:
```python
# ูุฏูู: ูุตุฑูู ุงูุฑูุงุชุจ
debit: salaries_expense (5010)

# ุฏุงุฆู: ุงูุฑูุงุชุจ ุงููุณุชุญูุฉ
credit: salaries_payable (2130)
```

**ุงูููู**: `models.py` - ุงูุณุทุฑ 503 (ุฏุงูุฉ `to_journal_entries()`)

##### ุนูุฏ ุชุณุฌูู ุฏูุนุฉ:
```python
# ูุฏูู: ุงูููุฏูุฉ/ุงูุจูู
debit: cash_account (1011 ุฃู 1013)

# ุฏุงุฆู: ุงููุฏูููู
credit: accounts_receivable (1020)
```

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 8131

#### 5. ุงูุชูุงุฑูุฑ ุงููุงููุฉ

##### ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)
**ุงููุณุงุฑ**: `/financials/trial-balance`

**ููู ูุนูู**:
- ูุฌูุน ุฌููุน ุงููููุฏ ูู `LedgerEntry`
- ูุญุณุจ ุฑุตูุฏ ูู ุญุณุงุจ (ูุฏูู - ุฏุงุฆู)
- ูุนุฑุถ ุงูููุฒุงู ูุน ุงูุชุญูู ูู ุงูุชูุงุฒู

##### ุงูููุฒุงููุฉ ุงูุนููููุฉ (Balance Sheet)
**ุงููุณุงุฑ**: `/financials/balance-sheet`

**ููู ูุนูู**:
- ุงูุฃุตูู = ูุฌููุน ุญุณุงุจุงุช ุงูุฃุตูู
- ุงูุฎุตูู = ูุฌููุน ุญุณุงุจุงุช ุงูุฎุตูู
- ุญููู ุงูููููุฉ = ุงูุฃุตูู - ุงูุฎุตูู

##### ูุงุฆูุฉ ุงูุฏุฎู (Income Statement)
**ุงููุณุงุฑ**: `/financials/income-statement`

**ููู ูุนูู**:
- ุงูุฅูุฑุงุฏุงุช = ูุฌููุน ุญุณุงุจุงุช ุงูุฅูุฑุงุฏุงุช
- ุงููุตุฑููุงุช = ูุฌููุน ุญุณุงุจุงุช ุงููุตุฑููุงุช
- ุตุงูู ุงูุฑุจุญ = ุงูุฅูุฑุงุฏุงุช - ุงููุตุฑููุงุช

**ุงูููู**: `routes/financials.py`

---

## ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช

### ุงููุณุชุฎุฏููู

**ุงููููุฐุฌ**: `User`

**ุงูููู**: `models.py` - ุงูุณุทุฑ 14

**ุงููุธุงุฆู**:
- `set_password()` - ุชุนููู ูููุฉ ุงููุฑูุฑ
- `check_password()` - ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
- `last_login()` - ุชุญุฏูุซ ุขุฎุฑ ุชุณุฌูู ุฏุฎูู

### ูุธุงู ุงูุตูุงุญูุงุช

**ุงููููุฐุฌ**: `UserPermission` + `AppKV`

**ุงูููู**: `models.py` - ุงูุณุทุฑ 815

**ููู ูุนูู**:
1. ุชุฎุฒูู ุงูุตูุงุญูุงุช ูู `AppKV` ูููุชุงุญ: `user_perms:{scope}:{user_id}`
2. ูู ุตูุงุญูุฉ ุชุญุชูู ุนูู:
   - `screen_key`: ุงูุดุงุดุฉ
   - `view`: ุนุฑุถ
   - `add`: ุฅุถุงูุฉ
   - `edit`: ุชุนุฏูู
   - `delete`: ุญุฐู
   - `print`: ุทุจุงุนุฉ

**ุงูุฏูุงู ุงููุณุงุนุฏุฉ**:
- `user_can(screen, action, branch_scope)` - ุงูุชุญูู ูู ุงูุตูุงุญูุฉ
- `can()` - ูู ุงูููุงูุจ

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 109

### ุชุณุฌูู ุงูุฏุฎูู

**ุงููุณุงุฑ**: `/login`

**ุงููุธููุฉ**: `login()`

**ุงูููู**: `app/routes.py` - ุงูุณุทุฑ 936

**ููู ูุนูู**:
1. ุงูุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ
2. ุงุณุชุฎุฏุงู `login_user()` ูู Flask-Login
3. ุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงููุทููุจุฉ ุฃู Dashboard

### ุญูุงูุฉ ุงููุณุงุฑุงุช

**ุงูุงุณุชุฎุฏุงู**:
```python
@login_required
def protected_route():
    # ูุญุชุงุฌ ุชุณุฌูู ุฏุฎูู
    pass
```

**ุงูุชุญูู ูู ุงูุตูุงุญูุงุช**:
```python
if not user_can('sales', 'view', branch_code):
    flash('ูุง ุชููู ุตูุงุญูุฉ ุงููุตูู', 'warning')
    return redirect(url_for('main.dashboard'))
```

---

## ุชุฏูู ุงูุนูู ูู ุงููุธุงู

### 1. ุชุฏูู ุงููุจูุนุงุช

```
ุงููุณุชุฎุฏู ูุณุฌู ุงูุฏุฎูู
    โ
ููุชุญ ุตูุญุฉ ุงููุจูุนุงุช (/sales)
    โ
ูุฎุชุงุฑ ุงููุฑุน (China Town / Place India)
    โ
ููุชุญ ุตูุญุฉ ุงูุทุงููุงุช (/sales/<branch>/tables)
    โ
ูุฎุชุงุฑ ุทุงููุฉ โ ููุชุญ POS (/pos/<branch>/table/<number>)
    โ
ูุถูู ุนูุงุตุฑ ูู ุงููููู
    โ
ูุญูุธ ุงูุทูุจ ุงููุคูุช (DraftOrder)
    โ
ูุฎุชุงุฑ ุนููู (ุงุฎุชูุงุฑู) โ ูุทุจู ุงูุฎุตู
    โ
ูุถุบุท Checkout โ ููุดุฆ SalesInvoice
    โ
ูุฎุชุงุฑ ุทุฑููุฉ ุงูุฏูุน
    โ
ูุทุจุน ุงููุงุชูุฑุฉ โ ููุดุฆ Payment + Journal Entries
    โ
ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงููุฉ ูุงููุฎุฒูู
```

### 2. ุชุฏูู ุงููุดุชุฑูุงุช

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงููุดุชุฑูุงุช (/purchases)
    โ
ููุดุฆ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุฌุฏูุฏุฉ
    โ
ูุฎุชุงุฑ ููุฑุฏ (ุฃู ูุฏุฎู ุงุณู ุฌุฏูุฏ)
    โ
ูุถูู ููุงุฏ ุฎุงู ูุน ุงููููุงุช ูุงูุฃุณุนุงุฑ
    โ
ูุญุณุจ ุงูุถุฑูุจุฉ ูุงูุฎุตู ุชููุงุฆูุงู
    โ
ูุญูุธ ุงููุงุชูุฑุฉ โ ููุดุฆ PurchaseInvoice
    โ
ููุดุฆ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆูุงู:
  - ูุฏูู: ุงููุฎุฒูู (1210)
  - ูุฏูู: ุถุฑูุจุฉ ุงููุฏุฎูุงุช (6200)
  - ุฏุงุฆู: ุงูุฏุงุฆููู (2110)
    โ
ุชุญุฏูุซ ุงููุฎุฒูู (RawMaterial.stock_quantity)
```

### 3. ุชุฏูู ุงููุตุฑููุงุช

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงููุตุฑููุงุช (/expenses)
    โ
ููุดุฆ ูุงุชูุฑุฉ ูุตุฑููุงุช ุฌุฏูุฏุฉ
    โ
ูุถูู ูุตู ุงููุตุฑูู ูุงููููุฉ ูุงูุณุนุฑ
    โ
ูุญุณุจ ุงูุถุฑูุจุฉ ูุงูุฎุตู
    โ
ูุญูุธ ุงููุงุชูุฑุฉ โ ููุดุฆ ExpenseInvoice
    โ
ููุดุฆ ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆูุงู:
  - ูุฏูู: ุงููุตุฑููุงุช (ุญุณุจ ุงูููุน)
  - ูุฏูู: ุถุฑูุจุฉ ุงููุฏุฎูุงุช (6200)
  - ุฏุงุฆู: ุงูุฏุงุฆููู (2110)
  - ุฅุฐุง ูุงู ุงูุฏูุน ููุฑู:
    - ูุฏูู: ุงูุฏุงุฆููู (2110)
    - ุฏุงุฆู: ุงูููุฏูุฉ/ุงูุจูู (1011/1013)
```

### 4. ุชุฏูู ุงูุฑูุงุชุจ

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงูููุธููู (/employees)
    โ
ูุถูู ููุธู ุฌุฏูุฏ ุฃู ูุฎุชุงุฑ ููุฌูุฏ
    โ
ููุชุญ ุตูุญุฉ ุงูุฑูุงุชุจ (/salaries/pay)
    โ
ูุฎุชุงุฑ ุงูุดูุฑ ูุงูุณูุฉ
    โ
ุงููุธุงู ูุญุณุจ ุงูุฑุงุชุจ ุชููุงุฆูุงู:
  - ุงูุฑุงุชุจ ุงูุฃุณุงุณู
  - ุงูุจุฏูุงุช
  - ุงูุฎุตููุงุช
  - ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ (ุฅู ูุฌุฏุช)
    โ
ูุญูุธ ุงูุฑุงุชุจ โ ููุดุฆ Salary
    โ
ููุดุฆ ูููุฏ ูุญุงุณุจูุฉ:
  - ูุฏูู: ูุตุฑูู ุงูุฑูุงุชุจ (5010)
  - ุฏุงุฆู: ุงูุฑูุงุชุจ ุงููุณุชุญูุฉ (2130)
    โ
ุนูุฏ ุงูุฏูุน:
  - ูุฏูู: ุงูุฑูุงุชุจ ุงููุณุชุญูุฉ (2130)
  - ุฏุงุฆู: ุงูููุฏูุฉ/ุงูุจูู (1011/1013)
```

### 5. ุชุฏูู ุงููููุฏ ุงูููููุฉ

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงููููุฏ (/journal)
    โ
ููุดุฆ ููุฏ ุฌุฏูุฏ
    โ
ูุถูู ุงูุจููุฏ (JournalLine):
  - ุญุณุงุจ ูุฏูู + ูุจูุบ
  - ุญุณุงุจ ุฏุงุฆู + ูุจูุบ
    โ
ูุชุญูู ูู ุงูุชูุงุฒู (ุงููุฏูู = ุงูุฏุงุฆู)
    โ
ูุญูุธ ุงูููุฏ (status = 'draft')
    โ
ูุฑุญู ุงูููุฏ (status = 'posted')
    โ
ุงููุธุงู ููุดุฆ LedgerEntry ููู ุจูุฏ
    โ
ุชุญุฏูุซ ุฃุฑุตุฏุฉ ุงูุญุณุงุจุงุช
```

---

## ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)

### APIs ุงููุจูุนุงุช

#### 1. ุฌูุจ ูุฆุงุช ุงููููู
```
GET /api/pos/<branch>/categories
```
**ุงูุงุณุชุฌุงุจุฉ**:
```json
[
  {
    "id": 1,
    "name": "Appetizers",
    "sort_order": 1
  }
]
```

#### 2. ุฌูุจ ุนูุงุตุฑ ุงููุฆุฉ
```
GET /api/menu/<cat_id>/items
```
**ุงูุงุณุชุฌุงุจุฉ**:
```json
[
  {
    "id": 1,
    "name": "Spring Rolls",
    "price": 12.0
  }
]
```

#### 3. ุฌูุจ/ุญูุธ ุงูุทูุจ ุงููุคูุช
```
GET /api/draft-order/<branch>/<table>
POST /api/draft-order/<branch>/<table>
```
**ุงูุทูุจ**:
```json
{
  "items": [
    {
      "product_name": "Spring Rolls",
      "quantity": 2,
      "price": 12.0
    }
  ],
  "customer": {
    "name": "Ahmed",
    "phone": "0500000000"
  },
  "discount_pct": 10
}
```

#### 4. ุฅุชูุงู ุนูููุฉ ุงูุจูุน
```
POST /api/sales/checkout
```
**ุงูุทูุจ**:
```json
{
  "branch_code": "china_town",
  "table_number": 5,
  "items": [...],
  "customer_name": "Ahmed",
  "payment_method": "CASH",
  "discount_pct": 10
}
```

#### 5. ุชุณุฌูู ุงููุฏููุนุงุช
```
POST /api/payments/register
```
**ุงูุทูุจ**:
```json
{
  "invoice_id": 123,
  "invoice_type": "sales",
  "amount": 100.0,
  "payment_method": "CASH"
}
```

### APIs ุงููุดุชุฑูุงุช

#### 1. ุฌูุจ ูุฆุงุช ุงููุดุชุฑูุงุช
```
GET /api/purchase-categories
```

#### 2. ุฌูุจ ุงูููุงุฏ ุงูุฎุงู
```
GET /api/raw_materials
```

### APIs ุงูุชูุงุฑูุฑ

#### 1. ุชูุฑูุฑ ุงููุจูุนุงุช
```
GET /api/reports/monthly?start_date=2025-01-01&end_date=2025-01-31
```

#### 2. ุชูุฑูุฑ ุงููุดุชุฑูุงุช
```
GET /api/reports/purchases?start_date=2025-01-01&end_date=2025-01-31
```

### APIs ุงูุทุงููุงุช

#### 1. ุญุงูุฉ ุงูุทุงููุงุช
```
GET /api/tables/<branch>
```
**ุงูุงุณุชุฌุงุจุฉ**:
```json
{
  "5": "occupied",
  "6": "available"
}
```

#### 2. ุฅุนุฏุงุฏุงุช ุงูุทุงููุงุช
```
GET /api/table-settings
POST /api/table-settings
```

---

## ุงููููุงุช ุงูุซุงุจุชุฉ ูุงูููุงูุจ

### ุงูููุงูุจ (Templates)

**ุงููุฌูุฏ**: `templates/`

#### ุงูููุงูุจ ุงูุฑุฆูุณูุฉ:
- `base.html` - ุงููุงูุจ ุงูุฃุณุงุณู
- `login.html` - ุชุณุฌูู ุงูุฏุฎูู
- `dashboard.html` - ููุญุฉ ุงูุชุญูู

#### ููุงูุจ ุงููุจูุนุงุช:
- `sales.html` - ูุงุฆูุฉ ุงููุจูุนุงุช
- `sales_tables.html` - ุฅุฏุงุฑุฉ ุงูุทุงููุงุช
- `pos_invoice.html` - ูุงุฌูุฉ POS
- `sales_table_invoice.html` - ูุงุชูุฑุฉ ุงูุทุงููุฉ

#### ููุงูุจ ุงููุดุชุฑูุงุช:
- `purchases.html` - ูุงุฆูุฉ ุงููุดุชุฑูุงุช

#### ููุงูุจ ุงููุตุฑููุงุช:
- `expenses.html` - ูุงุฆูุฉ ุงููุตุฑููุงุช
- `expenses_view.html` - ุนุฑุถ ูุงุชูุฑุฉ ูุตุฑููุงุช

#### ููุงูุจ ุงูููุธููู:
- `employees.html` - ูุงุฆูุฉ ุงูููุธููู (ูุญุธูุฑ)
- `salaries_pay.html` - ุฏูุน ุงูุฑูุงุชุจ

#### ููุงูุจ ุงูุชูุงุฑูุฑ:
- `reports.html` - ุงูุชูุงุฑูุฑ
- `reports_monthly.html` - ุงูุชูุงุฑูุฑ ุงูุดูุฑูุฉ

#### ููุงูุจ ุงููุธุงู ุงููุงูู:
- `financials/accounts.html` - ุงูุญุณุงุจุงุช
- `financials/journal_entries.html` - ุงููููุฏ ุงูููููุฉ
- `financials/ledger.html` - ุฏูุชุฑ ุงูุฃุณุชุงุฐ
- `financials/trial_balance.html` - ููุฒุงู ุงููุฑุงุฌุนุฉ
- `financials/balance_sheet.html` - ุงูููุฒุงููุฉ ุงูุนููููุฉ
- `financials/income_statement.html` - ูุงุฆูุฉ ุงูุฏุฎู

#### ููุงูุจ ุงูุทุจุงุนุฉ:
- `print/receipt.html` - ุฅูุตุงู ุงูุฏูุน
- `print/invoice_print.html` - ุทุจุงุนุฉ ุงููุงุชูุฑุฉ

### ุงููููุงุช ุงูุซุงุจุชุฉ (Static Files)

**ุงููุฌูุฏ**: `static/`

#### JavaScript:
- `js/main.js` - ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ
- `js/pos_table.js` - ููุทู POS
- `js/tables.js` - ุฅุฏุงุฑุฉ ุงูุทุงููุงุช
- `js/printInvoice.js` - ุทุจุงุนุฉ ุงูููุงุชูุฑ
- `js/reports.js` - ุงูุชูุงุฑูุฑ

#### CSS:
- `css/style.css` - ุงูุฃููุงุท ุงูุฑุฆูุณูุฉ
- `css/receipt.css` - ุฃููุงุท ุงูุฅูุตุงูุงุช

#### ุงูุตูุฑ:
- `images/logo.png` - ุงูุดุนุงุฑ
- `images/sar-currency.svg` - ุฑูุฒ ุงูุนููุฉ

---

## ููุฎุต ุดุงูู

### ุงููููุงุช ุงูุฑุฆูุณูุฉ:

1. **`app/__init__.py`** - ููุทุฉ ุงูุฏุฎูู ุงูุญุฏูุซุฉ (Application Factory)
2. **`app.py`** - ุงูููู ุงููุฏูู ุงููุจูุฑ (ูุญุชูู ุนูู ูู ุดูุก)
3. **`app_production.py`** - ููุทุฉ ุงูุฏุฎูู ููุฅูุชุงุฌ
4. **`models.py`** - ุฌููุน ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. **`app/routes.py`** - ุฌููุน ุงููุณุงุฑุงุช ูุงููุธุงุฆู
6. **`config.py`** - ุงูุฅุนุฏุงุฏุงุช
7. **`extensions.py`** - ุฅุถุงูุงุช Flask

### ุงูุงุณุชุฏุนุงุกุงุช ุงูุฑุฆูุณูุฉ:

#### ุนูุฏ ุจุฏุก ุงูุชุทุจูู:
```
1. app/__init__.py: create_app()
   โ
2. extensions.py: ุชููุฆุฉ db, bcrypt, login_manager, etc.
   โ
3. config.py: ุชุญููู ุงูุฅุนุฏุงุฏุงุช
   โ
4. app/routes.py: ุชุณุฌูู Blueprints
   โ
5. models.py: ุฅูุดุงุก ุงูุฌุฏุงูู (db.create_all())
```

#### ุนูุฏ ุทูุจ ุตูุญุฉ POS:
```
1. ุงููุณุชุฎุฏู ูุทูุจ: /pos/china_town/table/5
   โ
2. app/routes.py: pos_table(branch_code, table_number)
   โ
3. ุฌูุจ DraftOrder ูู AppKV ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
4. ุฌูุจ MenuCategory ู MenuItem
   โ
5. render_template('pos_invoice.html', ...)
   โ
6. JavaScript: pos_table.js ูุชูุงุนู ูุน APIs
```

#### ุนูุฏ ุฅุชูุงู ุนูููุฉ ุงูุจูุน:
```
1. JavaScript: POST /api/sales/checkout
   โ
2. app/routes.py: api_sales_checkout()
   โ
3. ุฅูุดุงุก SalesInvoice
   โ
4. ุฅูุดุงุก SalesInvoiceItem ููู ุนูุตุฑ
   โ
5. ุชุญุฏูุซ ุญุงูุฉ Table
   โ
6. ุฅูุดุงุก JournalEntry ุชููุงุฆูุงู
   โ
7. ุฅูุดุงุก JournalLine (ูุฏูู/ุฏุงุฆู)
   โ
8. ุฅุฑุฌุงุน ุฑูู ุงููุงุชูุฑุฉ
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:

**ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ**:
- `users` - ุงููุณุชุฎุฏููู
- `sales_invoices` - ููุงุชูุฑ ุงููุจูุนุงุช
- `sales_invoice_items` - ุนูุงุตุฑ ููุงุชูุฑ ุงููุจูุนุงุช
- `purchase_invoices` - ููุงุชูุฑ ุงููุดุชุฑูุงุช
- `expense_invoices` - ููุงุชูุฑ ุงููุตุฑููุงุช
- `tables` - ุงูุทุงููุงุช
- `draft_orders` - ุงูุทูุจุงุช ุงููุคูุชุฉ
- `customers` - ุงูุนููุงุก
- `suppliers` - ุงูููุฑุฏูู
- `raw_materials` - ุงูููุงุฏ ุงูุฎุงู
- `meals` - ุงููุฌุจุงุช
- `employees` - ุงูููุธููู
- `salaries` - ุงูุฑูุงุชุจ
- `accounts` - ุงูุญุณุงุจุงุช
- `journal_entries` - ุงููููุฏ ุงูููููุฉ
- `journal_lines` - ุจููุฏ ุงููููุฏ
- `ledger_entries` - ุฏูุชุฑ ุงูุฃุณุชุงุฐ
- `payments` - ุงููุฏููุนุงุช
- `menu_categories` - ูุฆุงุช ุงููููู
- `menu_items` - ุนูุงุตุฑ ุงููููู

---

## ุงูุฎูุงุตุฉ

ูุฐุง ูุธุงู ุฅุฏุงุฑุฉ ูุทุงุนู ูุชูุงูู ูุฏุนู:

โ **ูุธุงู ููุงุท ุงูุจูุน (POS)** ูุงูู ูุน ุฅุฏุงุฑุฉ ุงูุทุงููุงุช
โ **ุฅุฏุงุฑุฉ ุงููุจูุนุงุช ูุงููุดุชุฑูุงุช ูุงููุตุฑููุงุช**
โ **ูุธุงู ูุญุงุณุจู ูุชูุงูู** ูุน ุงููููุฏ ุงูููููุฉ ูุฏูุชุฑ ุงูุฃุณุชุงุฐ
โ **ุฅุฏุงุฑุฉ ุงูููุธููู ูุงูุฑูุงุชุจ**
โ **ุฅุฏุงุฑุฉ ุงููุฎุฒูู** (ุงูููุงุฏ ุงูุฎุงู ูุงููุฌุจุงุช)
โ **ุงูุชูุงุฑูุฑ ุงููุงููุฉ** ุงูุดุงููุฉ
โ **ุฏุนู ูุฑุนูู** (China Town & Place India)
โ **ูุงุฌูุฉ ุซูุงุฆูุฉ ุงููุบุฉ** (ุนุฑุจู/ุฅูุฌููุฒู)
โ **ูุธุงู ุตูุงุญูุงุช** ูุชูุฏู

ุงููุธุงู ูุจูู ุนูู Flask ูุน SQLAlchemyุ ููุฏุนู SQLite ููุชุทููุฑ ูPostgreSQL ููุฅูุชุงุฌ.

---

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ**: 2026-01-27
**ุงูุฅุตุฏุงุฑ**: 2.0.0
